# FuBot — Готовность к запуску

## Что нужно для запуска

### 1. Создать файл `.env`

```env
# Обязательно
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
ADMIN_IDS=123456789

# Опционально
DEBUG=false
LOG_LEVEL=INFO
```

### 2. Установить зависимости

```bash
pip install -r requirements.txt
```

### 3. Запустить

```bash
python -m core.main
```

---

## Что РАБОТАЕТ сразу (без доработок)

| Функция | Статус | Комментарий |
|---------|--------|-------------|
| /start | ✅ | Регистрация, главное меню |
| Баланс GTON | ✅ | Отображается с конвертацией в RUB |
| Ежедневный бонус | ✅ | 7 дней, streak, награды GTON |
| Промокоды | ✅ | Ввод, активация, награда GTON |
| Партнёрка (просмотр) | ✅ | Мои рефералы, статистика |
| Партнёрка (заявка) | ✅ | Подача заявки на партнёрство |
| Партнёрка (кабинет) | ✅ | Баланс, статистика, вывод |
| Вывод средств | ✅ | Карта/СБП, заявки |
| Реферальные ссылки | ✅ | /start ref_XXX, /start partner_XXX |
| Реферальные комиссии | ✅ | Автоначисление при тратах |
| Настройки языка | ✅ | RU/EN |
| Помощь | ✅ | Текст + кнопка поддержки |
| **Админ-панель** | | |
| - Статистика | ✅ | Пользователи, финансы, рефералы |
| - Пользователи | ✅ | Поиск, профиль, баланс, транзакции |
| - Партнёры | ✅ | Список, заявки, выводы, комиссии |
| - Промокоды | ✅ | Создание, редактирование, статистика |
| - Модерация | ✅ | Предупреждения, баны |
| - Рассылки | ✅ | Создание, отправка, триггеры |
| - Настройки | ✅ | Все категории |

---

## Что НЕ РАБОТАЕТ (нужна доработка)

| Функция | Статус | Что нужно |
|---------|--------|-----------|
| Пополнение баланса | ⚠️ | UI есть, но платежи не подключены |
| Настройки уведомлений | ⚠️ | Страница-заглушка |

### Пополнение баланса

**Проблема:** Кнопки "100 ₽", "500 ₽", "1000 ₽" показывают alert "Скоро!", реальные платежи не работают.

**Что нужно:**
1. Подключить платёжный провайдер (TON/YooKassa/CryptoBot)
2. Реализовать webhook сервер для приёма платежей
3. Обработать callback после оплаты

**Временное решение:** Админ может вручную добавить баланс через:
`Админ-панель → Пользователи → [Найти] → Баланс → Добавить`

### Настройки уведомлений

**Проблема:** Кнопка "Уведомления" в настройках показывает заглушку.

**Что нужно:**
1. Определить какие уведомления нужны
2. Добавить переключатели в UI
3. Сохранять в `UserNotificationSettings`

---

## Возможные ошибки при запуске

### 1. "TELEGRAM_BOT_TOKEN is required"

**Решение:** Создайте `.env` файл с токеном бота.

### 2. "ADMIN_IDS is required"

**Решение:** Добавьте свой Telegram ID в `.env`:
```env
ADMIN_IDS=123456789
```

Узнать свой ID: напишите боту @userinfobot

### 3. Ошибки импорта модулей

**Решение:** Установите зависимости:
```bash
pip install -r requirements.txt
```

### 4. "Database not initialized"

**Решение:** Это не должно происходить — БД создаётся автоматически при первом запуске.

---

## Тестирование перед запуском

```bash
# Проверить ядро (БД, модели)
python tests/test_full_core.py

# Проверить Telegram структуру
python tests/test_telegram_platform.py
```

Оба теста должны показать "ALL TESTS PASSED!"

---

## Первые шаги после запуска

1. **Напишите боту /start** — вы зарегистрируетесь
2. **Проверьте админ-панель** — кнопка появится если ваш ID в ADMIN_IDS
3. **Создайте промокод** — Админ → Промокоды → Создать
4. **Активируйте промокод** — Промокод → введите код
5. **Проверьте баланс** — должен появиться GTON

---

## Резюме

### Готово к продакшену: 90%

| Компонент | Готовность |
|-----------|------------|
| Регистрация и профиль | ✅ 100% |
| Баланс и GTON | ✅ 100% |
| Партнёрская программа | ✅ 100% |
| Выводы средств | ✅ 100% |
| Промокоды | ✅ 100% |
| Ежедневный бонус | ✅ 100% |
| Админ-панель | ✅ 100% |
| Рассылки | ✅ 100% |
| Модерация | ✅ 100% |
| **Пополнение** | ⚠️ 20% |
| **Уведомления** | ⚠️ 30% |

### Можно запускать?

**ДА**, если:
- Пополнение баланса будет через админа (вручную)
- Или через промокоды

**НЕТ**, если:
- Нужны реальные платежи от пользователей
- В этом случае нужно подключить платёжный провайдер
